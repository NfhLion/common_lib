### 一. 简介

- 这本书是主要讲的是如何 **改善代码质量**，给出了一系列行之有效的整洁代码操作实践。
- 好的代码需要符合各种规范，我们熟知的有：开闭原则、单一责任原则等等，这里面都有讲到。符合这些原则开发对我们工作及代码质量会有显著的提高：

  - 对于个人来说：**可读性高**的代码我们review时候会花少量的时间就可以合入到线上分支。如果你的代码别人看不懂、或者实现得十分挫，那你的 merge request 估计会被拒绝。
  - 对于项目来说：保证高质量的项目代码会提高项目的**可维护性**。

  这本书里面提到了大量的、写出高质量代码的方法。基本就是 **三个概念**：

  - **可扩展性**：在功能演进时，是否要修改大量代码、甚至是重构？
  - **可读性**：是否很容易让人读懂，并且没有歧义？
  - **简洁性**：代码的逻辑、实现是否精简？

### 二. 命名

几条简单的命名规则

- 避免误导

  - 一组账号的命名：`accountList`  ---> `accountGroup/accounts`
- 命名中不要包含无用信息

  - 在变量名上添加一些不必要的前缀、后缀，它们不能提供更多有用的信息。
- 使用读得出来的名称

  - 变量名 timestamp 优于 ymdhms（表达年月日时分秒的意思）
- 使用可搜索的名称

  - 在大型项目中，经常需要通过全文搜索、跳转来找到相关的代码实现；变量名、函数名、类名需要可搜索
  - 不要直接使用魔数、字符串字面量、硬编码，使用有意义的大写变量名指代，或者使用枚举类型。`int PI=3.14`
  - 这样做对我们调试代码也是有好处的
- 避免歧义

  - 如变量 `pi`通常指代圆周率，避免用它指代其他
- 类名和对象名应当是名词或者名词短语，并且有区分度

  - 如 Customer，避免Info（没有表达什么信息），避免ParseAddress（AddressParser更好）
- 方法名应当是动词或者动词短语

  - 常用的动词前缀包括 select、delete、save、get、set等
- 命名不要使用行话黑话，要含义明确，通用性强

  - abort() 比 eatMyShorts() 更好
- 每种概念一个词

  - 给每种抽象概念一个词，使用fetch 、retrieve、get等来给在多个类中的同种方法命名。
- 优先使用解决方案领域的名称，或使用源自所在问题领域的名称。

```cpp
// 例1
vector<vector<int>> theList = { {}, {} };

vector<vector<int>> getThem()
{
	vector<vector<int>> list1;
	for (auto x : theList) {
		if (x[0] == 4)
			list1.push_back(x);
	}
	return list1;
}

/*
* 假设我们在开发一个扫雷游戏，theList表示为盘面的单元格列表，盘面上的每一个单元格用一个数组表示，
* 0下标的条目是一种状态值，该状态值为4的时候表示已标记。获取已标记的单元格。
*/

// 例2
vector<vector<int>> gameBoard = { {}, {} };
constexpr int STATUS_VALUE = 0;
constexpr int FLAGGED = 4;

vector<vector<int>> getFlaggedCells()
{
	vector<vector<int>> flaggedCells;
	for (const auto& cell : gameBoard) {
		if (cell[STATUS_VALUE] == FLAGGED)
			flaggedCells.push_back(cell);
	}
	return flaggedCells;
}

// 例3
constexpr int STATUS_VALUE = 0;
constexpr int FLAGGED = 4;
class Cell 
{
public:
    bool isFlagged() const { return _cell[STATUS_VALUE] == FLAGGED; }
private:
    vector<int> _cell;
};
vector<Cell> gameBoard = { {}, {} };

vector<Cell> getFlaggedCells()
{
	vector<Cell> flaggedCells;
	for (const Cell& cell : gameBoard) {
		if (cell.isFlagged())
			flaggedCells.push_back(cell);
	}
	return flaggedCells;
}

```

### 三. 函数

函数的使用规则

- 每个函数内容应该是短小简洁的，只做一件事，函数自身是一个抽象层级
  - 符合自顶向下阅读代码：向下规则

```cpp


```
